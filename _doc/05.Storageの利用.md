# Storageの利用

## Web画面からファイルアップロード処理を実装する
[参考](https://firebase.google.com/docs/storage/web/upload-files?hl=ja)

上記を参考にHostingページからStorageへのファイルアップロード処理を実装。
[例](./../firebase/public/file_uploader.html)    

#### ハマったところ
firebase-storage.jsを読み込まないと「firebase.storage()」で、そんなメソッドないよ。って言われる。
```html
<script src="/__/firebase/7.21.1/firebase-storage.js"></script>
```

Storageのルールで認証が有効で未認証だとエラーになる（当たり前なんですが。。）
`if request.auth != null;`だと認証ないといけない。`==null`だと誰でも書き込める。
```
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    match /{allPaths=**} {
      // allow read, write: if request.auth != null;
      allow read, write: if request.auth == null;
    }
  }
}
```
